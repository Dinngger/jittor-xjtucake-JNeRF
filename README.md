# jittor-xjtucake-JNeRF
# jittor 人工智能算法挑战赛可谓渲染新视角生成赛题 洗脚点心队

# 简介
本项目包含了第二届计图挑战赛-可微渲染新视角生成比赛的代码实现。该项目是本次比赛A榜Top3，B榜Top2.
本项目基于JNeRF开发，其特点是：
1. 通过MVS方法获取较为准确的相机参数，使得Car和Easyship场景下更好的结果；
2. 修改渲染方程，改为6通道rgb渲染，将反射光和透射光分离，大幅提升NeRF对透明物体的渲染效果；
3. 调整aabb，scale，offset等参数，使得物体占据aabb中的最优位置，提升细节表现力。

另外，我们还做了一些小更改：
- 改进了训练脚本和显示方式，修改数据集加载的位置，减少显存占用。
- 增加了模型查看GUI，基于dearpygui。
- 增加了数据集json处理脚本，利用icp和插值算法修正数据集中的位姿错误。

单个场景在1张2070s上训练时间约为10分钟,5个场景大约需要50分钟。

# 安装
## 运行环境
- jittor >= 1.3.4.16
- cuda == 11.4
- dearpygui
- 其他请参考JNeRF

## 比赛训练好的模型
我们训练好的模型可以在百度网盘下载。

# 使用方法
1. 修改projects/ngp/configs/ngp_comp.py中的exp_name以运行不同的场景。
2. 修改run_comp.sh中的task以执行不同的任务。
   - train执行训练任务，训练时只显示loss，训练完成后会加载验证集，输出平均最小和最大的psnr。
   - test会渲染输出A榜测试集图片。
   - B_test会渲染输出B榜测试集图片。
   - val_all加载验证集，输出平均最小和最大的psnr。
   - gui启动图形界面，可以自由查看模型。
